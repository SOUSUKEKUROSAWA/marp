---
marp: true

theme: default
class: 
    - invert

# theme: gaia
# class:
#     - invert
#     - gaia
#     - lead

# theme: uncover
# class:
#     - invert

# theme: beamer

# theme: border

# theme: gradient
# class:
#     - blue

# theme: academic
# class:
#     - lead

# theme: graph_paper
# class:
#     - lead

# theme: rose-pine

# theme: rose-pine-dawn

# theme: rose-pine-moon
---

<!-- headingDivider: 1 -->
<!-- size: 16:9 -->
<!-- paginate: true -->
<!-- math: katex -->

# :revolving_hearts: 尊敬に満ちたコードレビュー

黒澤颯介（Sosuke Kurosawa）/ Lima

# :thinking: コードレビューの難しさ

- :heart: 人間相手だから気づかいが必要
- :x: 甘々でもダメ
- :small_red_triangle: 現状，完全自動化はできない

# :star: Respectful Code Reviews

<https://chromium.googlesource.com/chromium/src/+/HEAD/docs/cr_respect.md>

Chromium（Google Chromeなどを開発しているオープンソースプロジェクト）のレビュー担当者向けガイドライン

# :innocent: 能力と善意を前提とする

- 能力と善意のどちらかが欠けている人は採用ではじかれているはず
- ミスは情報不足に起因するものだと考える

# :speech_balloon: 直接話し合う

- テキストベースのやり取りで意見がまとまらなければ、実際に話して意見を交換する
- 「あーそれは知らなかった」の一言で済むことも多い

# :information_desk_person: 理由を説明する

- なぜ間違っているか、どういう変更が正しいかを説明する
- 「間違っています」だけでは相手に伝わらない

# :ear: 理由を聞く

- 相手の意図が不明瞭な時は、遠慮せず変更理由を聞く
- やり取りを記録することで、将来的に変更の意図などもわかるようになり、より良い実装を考える機会にもなる

# :pushpin: 終わりを見つける

- 完璧に徹底したレビューをしようとすると、レビューされる側は疲弊する
- 「絶対に間違いないと保証する」ではなく、「よさそうです（＝LGTM）」でレビューを適切に終える

# :clock10: 適度な時間内に返信する

- レビューをいつまでも放置しない
- ２４時間以内に返信できなければ、いつまでに返信できるかをコメントで残す

# :thumbsup: 良い点について言及する

- 「全ての欠点を見つけてやるぞ」という気持ちで臨まず、ポジティブな点を認める姿勢でレビューする
- 無理に褒める必要はないが、難しい仕事を引き受けてくれた人や、良い変更をしてくれた人には感謝を伝える

# :x: 人を辱めない

- 相手が最善を尽くしていることを前提にする
- 「なぜ気づかなかった？」といった無意味なコメントをしない

# :x: 極端な言葉やネガティブな表現を使わない

- 「まともな人間ならこうはしない」「ひどいアルゴリズムだ」といったネガティブな表現をレビュー時に使わない
- 人ではなく、コードについて議論する

# :flashlight: ツールの使用を思いとどまらせない

- コードフォーマッターなど自動化ツールを導入してくれたら、まずそのことに感謝する
- ツールの利用の是非や好みを押し付けない

# :bicyclist: 自転車置き場の議論 *1 をしない

> *1 自転車置き場の建設に関する議論が，原子炉の建設よりも長く激しく行われるという例え

- 理解しやすい問題に対しては強い意見を持ちやすく、理解しにくい問題に対しては無関心になりがちであることを自覚する
- どちらでもいいようなことについて、レビュー上で決着をつけようとしない

# :star: 相手へのリスペクトを忘れずに

- 自分の方がもっとよくできるとしても，一人で全ての仕事はできない
- まずは，「やってくれてありがとう」から入る
